---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import Tags from '../components/Tags.astro';

const posts = await getCollection('blog');
posts.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<Layout title="Blog | Soumyo Dey">
  <main class="space-y-12 pt-24">
    <section class="reveal border-b border-[var(--color-border-light)] pb-12 dark:border-[var(--color-border-dark)]">
      <p class="text-xs font-semibold uppercase tracking-[0.3em] text-[var(--color-muted-light)] dark:text-[var(--color-muted-dark)]">Field notes</p>
      <h1 class="mt-4 text-4xl font-sans font-semibold text-[var(--color-text-light)] dark:text-[var(--color-text-dark)]">Stories from the build log</h1>
      <p class="mt-4 max-w-2xl text-[var(--color-muted-light)] dark:text-[var(--color-muted-dark)]">
        Reflections on AI, product decisions, and the small stories that shape how we build.
      </p>
    </section>

    <div class="space-y-12">
      {
        posts.map((post) => (
          <article class="reveal group relative flex flex-col items-start transition-transform duration-300 hover:-translate-y-1">
            <div class="flex items-center gap-3 text-xs font-medium uppercase tracking-[0.3em] text-[var(--color-muted-light)] dark:text-[var(--color-muted-dark)]">
              <time datetime={post.data.date}>
                {new Date(post.data.date).toLocaleDateString('en-US', {
                  year: 'numeric',
                  month: 'short',
                  day: 'numeric',
                })}
              </time>
              {post.data.readingTime && (
                <>
                  <span>Â·</span>
                  <span>{post.data.readingTime} min read</span>
                </>
              )}
            </div>
            <h2 class="mt-3 text-2xl font-sans font-semibold text-[var(--color-text-light)] transition-colors group-hover:text-[var(--color-primary-light)] dark:text-[var(--color-text-dark)] dark:group-hover:text-[var(--color-primary-dark)]">
              <a href={`/blog/${post.slug}`}>
                <span class="absolute inset-0"></span>
                {post.data.title}
              </a>
            </h2>
            <p class="mt-3 max-w-2xl text-[var(--color-muted-light)] dark:text-[var(--color-muted-dark)]">{post.data.description}</p>
            {post.data.tags && (
              <div class="mt-4">
                <Tags tags={post.data.tags} />
              </div>
            )}
          </article>
        ))
      }
    </div>
  </main>
</Layout>
